{% extends "LAYOUT2.html" %}
{% block body %}

<div class="modalhead"> Top Headlines and Latest Updates </div>

<section>

</section>

<script>

  const section = document.querySelector('section');
  let requestURLs = [
    'https://newsapi.org/v2/everything?language=en&qInTitle="gordon ramsay"&pageSize=3&apiKey=c1e02f8b32c3415891568b238ca39984',
    'https://newsapi.org/v2/everything?language=en&qInTitle="romee strijd"&pageSize=3&apiKey=c1e02f8b32c3415891568b238ca39984',
    'https://newsapi.org/v2/everything?language=en&qInTitle="taylor swift"&pageSize=3&apiKey=c1e02f8b32c3415891568b238ca39984'
  ];

  for (let url_index = 0; url_index < requestURLs.length; url_index++) {
    let request = new XMLHttpRequest();
    request.open('GET', requestURLs[url_index]);
    request.responseType = 'json';
    request.send();

    request.onload = function () {
      const apHeadlines = request.response;
      showAp(apHeadlines);
    }

    function showAp(jsonObj) {
      const headlines = jsonObj['articles'];

      for (let i = 0; i < headlines.length; i++) {
        const myArticle = document.createElement('article');
        const myH2 = document.createElement('h2');
        const myPara1 = document.createElement('p');
        const myPara2 = document.createElement('p');
        const myPara3 = document.createElement('p');

        myH2.textContent = headlines[i].title;
        myPara1.textContent = headlines[i].source['name'];
        myPara2.textContent = headlines[i].publishedAt;
        myPara3.textContent = headlines[i].description;

        myArticle.appendChild(myH2);
        myArticle.appendChild(myPara1);
        myArticle.appendChild(myPara2);
        myArticle.appendChild(myPara3);

        section.appendChild(myArticle);
      }
    }
  }

</script>

{% endblock %}